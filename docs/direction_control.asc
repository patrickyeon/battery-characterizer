Version 4
SHEET 1 1872 1028
WIRE 1200 -48 1200 -80
WIRE -112 -16 -112 -48
WIRE 1312 -16 1312 -32
WIRE 0 16 0 0
WIRE 1200 48 1200 32
WIRE 1312 48 1200 48
WIRE 1408 48 1312 48
WIRE 1664 48 1408 48
WIRE 1200 64 1200 48
WIRE -112 80 -112 64
WIRE 0 80 -112 80
WIRE 96 80 0 80
WIRE 352 80 96 80
WIRE 1408 80 1408 48
WIRE 1664 80 1664 48
WIRE -112 96 -112 80
WIRE 96 112 96 80
WIRE 352 112 352 80
WIRE 1584 128 1488 128
WIRE 1792 128 1680 128
WIRE 1152 144 1088 144
WIRE 272 160 176 160
WIRE 480 160 368 160
WIRE -160 176 -224 176
WIRE 1200 336 1200 304
WIRE -112 368 -112 336
WIRE 1296 368 1296 352
WIRE -16 400 -16 384
WIRE 1200 432 1200 416
WIRE 1296 432 1200 432
WIRE 1408 432 1296 432
WIRE 1664 432 1408 432
WIRE 1200 448 1200 432
WIRE -112 464 -112 448
WIRE -16 464 -112 464
WIRE 96 464 -16 464
WIRE 352 464 96 464
WIRE 1408 464 1408 432
WIRE 1664 464 1664 432
WIRE -112 480 -112 464
WIRE 96 496 96 464
WIRE 352 496 352 464
WIRE 1584 512 1488 512
WIRE 1776 512 1680 512
WIRE 1152 528 1088 528
WIRE 272 544 176 544
WIRE 464 544 368 544
WIRE -160 560 -224 560
FLAG -112 -48 batt0
FLAG -112 192 0
FLAG -224 176 dir
FLAG -112 336 batt1
FLAG -112 576 0
FLAG -224 560 ndir
FLAG 480 160 batt0
FLAG 464 544 batt1
FLAG 80 544 vchg
FLAG 80 160 vchg
FLAG -880 464 0
FLAG -880 208 0
FLAG -736 -96 0
FLAG -736 -176 vcc
FLAG -880 128 dir
FLAG -880 384 ndir
FLAG 1200 -80 batt0
FLAG 1200 160 0
FLAG 1088 144 ndir
FLAG 1200 304 batt1
FLAG 1200 544 0
FLAG 1088 528 dir
FLAG 1792 128 batt0
FLAG 1776 512 batt1
FLAG 1392 512 vdis
FLAG 1392 128 vdis
FLAG 0 -80 vcc
FLAG -16 304 vcc
FLAG 1312 -112 vcc
FLAG 1296 272 vcc
FLAG -880 1008 0
FLAG -720 1008 0
FLAG -880 848 batt0
FLAG -720 848 batt1
FLAG -400 1008 0
FLAG -240 1008 0
FLAG -400 848 vchg
FLAG -240 848 vdis
SYMBOL pmos 176 112 R90
SYMATTR InstName M1
SYMATTR Value FDS4465
SYMBOL pmos 272 112 M90
SYMATTR InstName M2
SYMATTR Value FDS4465
SYMBOL nmos -160 96 R0
SYMATTR InstName M3
SYMATTR Value BSS123
SYMBOL res -128 -32 R0
SYMATTR InstName R1
SYMATTR Value 3.3k
SYMBOL pmos 176 496 R90
SYMATTR InstName M4
SYMATTR Value FDS4465
SYMBOL pmos 272 496 M90
SYMATTR InstName M5
SYMATTR Value FDS4465
SYMBOL nmos -160 480 R0
SYMATTR InstName M6
SYMATTR Value BSS123
SYMBOL res -128 352 R0
SYMATTR InstName R2
SYMATTR Value 3.3k
SYMBOL voltage -736 -192 R0
SYMATTR InstName V1
SYMATTR Value 6
SYMBOL voltage -880 112 R0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL voltage -880 368 R0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL pmos 1488 80 R90
SYMATTR InstName M7
SYMATTR Value FDS4465
SYMBOL pmos 1584 80 M90
SYMATTR InstName M8
SYMATTR Value FDS4465
SYMBOL nmos 1152 64 R0
SYMATTR InstName M9
SYMATTR Value BSS123
SYMBOL res 1184 -64 R0
SYMATTR InstName R3
SYMATTR Value 3.3k
SYMBOL pmos 1488 464 R90
SYMATTR InstName M10
SYMATTR Value FDS4465
SYMBOL pmos 1584 464 M90
SYMATTR InstName M11
SYMATTR Value FDS4465
SYMBOL nmos 1152 448 R0
SYMATTR InstName M12
SYMATTR Value BSS123
SYMBOL res 1184 320 R0
SYMATTR InstName R4
SYMATTR Value 3.3k
SYMBOL res -16 -96 R0
SYMATTR InstName R6
SYMATTR Value 3.3k
SYMBOL schottky -16 16 R0
WINDOW 3 45 37 Left 2
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -32 288 R0
SYMATTR InstName R7
SYMATTR Value 3.3k
SYMBOL schottky -32 400 R0
WINDOW 3 45 34 Left 2
SYMATTR InstName D3
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1296 -128 R0
SYMATTR InstName R8
SYMATTR Value 3.3k
SYMBOL schottky 1296 -16 R0
WINDOW 3 37 31 Left 2
SYMATTR InstName D4
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1280 256 R0
SYMATTR InstName R9
SYMATTR Value 3.3k
SYMBOL schottky 1280 368 R0
WINDOW 3 43 31 Left 2
SYMATTR InstName D5
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -880 912 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 3.5
SYMBOL voltage -720 912 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 3.5
SYMBOL res -896 832 R0
SYMATTR InstName R5
SYMATTR Value 0.15
SYMBOL res -736 832 R0
SYMATTR InstName R10
SYMATTR Value 0.15
SYMBOL current -400 1008 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName I1
SYMATTR Value 0
SYMBOL current -240 928 R0
SYMATTR InstName I2
SYMATTR Value 0
SYMBOL res -416 832 R0
SYMATTR InstName R11
SYMATTR Value 0.01
SYMBOL res -256 832 R0
SYMATTR InstName R12
SYMATTR Value 0.01
TEXT 40 -128 Left 2 ;Charging section
TEXT 1424 -160 Left 2 ;Discharging
TEXT 32 888 Left 2 !.op
